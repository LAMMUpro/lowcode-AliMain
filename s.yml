edition: 1.0.0
name: compoent-test
access: "alibaba-access" # 本机密钥别名
services:
  cn-shenzhen-lowcode-web:
    component: devsapp/fc
    actions:
      pre-deploy:
        - run: yarn build
          path: ./
        - run: copy nginx.conf build
          path: ./
    props:
      region: cn-shenzhen
      service:
        logConfig:
          enableRequestMetrics: true
          enableInstanceMetrics: true
          logBeginRule: DefaultRegex
          project: aliyun-fc-cn-shenzhen-07e4b83f-a40e-55ff-87c1-1ce1c857fb14
          logstore: function-log
        role: acs:ram::1110941952716916:role/AliyunFcDefaultRole
        description: 低代码编辑器
        internetAccess: true
        ossMountConfig:
          mountPoints: []
        name: editor
      function:
        handler: index.handler
        timeout: 60
        diskSize: 512
        caPort: 9000
        customRuntimeConfig:
          command:
            - nginx
            - '-c'
            - /code/nginx.conf
            - '-g'
            - daemon off;
        instanceType: e1
        runtime: custom
        cpu: 0.35
        instanceConcurrency: 20
        memorySize: 512
        environmentVariables:
          LD_LIBRARY_PATH: >-
            /code:/code/lib:/usr/local/lib:/opt/lib:/opt/php8.1/lib:/opt/php8.0/lib:/opt/php7.2/lib
        name: editor
        asyncConfiguration: {}
        codeUri: ./build
      triggers:
        - name: defaultTrigger
          description: ''
          type: http
          qualifier: LATEST
          config:
            methods:
              - GET
              - POST
              - PUT
              - DELETE
            authType: anonymous
            disableURLInternet: false
